"use strict";(self.webpackChunkperga_docs=self.webpackChunkperga_docs||[]).push([[847],{2540:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"perga-api","title":"Perga API","description":"License: MIT","source":"@site/docs/perga-api.md","sourceDirName":".","slug":"/perga-api","permalink":"/perga-docs/docs/perga-api","draft":false,"unlisted":false,"editUrl":"https://github.com/dbtiunov/perga-docs/tree/main/docs/perga-api.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to Perga","permalink":"/perga-docs/docs/intro"},"next":{"title":"Perga Web","permalink":"/perga-docs/docs/perga-web"}}');var a=i(4848),l=i(8453);const r={sidebar_position:2},t="Perga API",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Features",id:"features",level:2},{value:"Tech Stack",id:"tech-stack",level:2},{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Setup",id:"setup",level:3},{value:"Docker Setup",id:"docker-setup",level:2},{value:"API Documentation",id:"api-documentation",level:2},{value:"API Endpoints",id:"api-endpoints",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Planner Days",id:"planner-days",level:3},{value:"Monthly Agenda and Backlog",id:"monthly-agenda-and-backlog",level:3},{value:"Development",id:"development",level:2},{value:"Project Structure",id:"project-structure",level:3},{value:"Testing",id:"testing",level:3},{value:"Database Migrations",id:"database-migrations",level:3},{value:"License",id:"license",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"perga-api",children:"Perga API"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.img,{src:"https://img.shields.io/badge/License-MIT-blue.svg",alt:"License: MIT"}),"\n",(0,a.jsx)(n.img,{src:"https://img.shields.io/badge/python-3.10-blue.svg",alt:"Python"}),"\n",(0,a.jsx)(n.img,{src:"https://github.com/dbtiunov/perga-api/actions/workflows/ci.yml/badge.svg",alt:"Build"})]}),"\n",(0,a.jsx)(n.p,{children:"Personal organizer backend that provides the core functionality for the Perga system."}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Perga API"})," is the core of the product, providing a RESTful API for the Perga personal organizer system. It works in conjunction with ",(0,a.jsx)(n.a,{href:"./perga-web",children:"Perga Web"}),", which is a standalone browser client that connects to the backend to provide a user-friendly web interface."]}),"\n",(0,a.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Daily planner"}),"\n",(0,a.jsx)(n.li,{children:"Monthly agenda and backlog"}),"\n",(0,a.jsx)(n.li,{children:"RESTful API with FastAPI"}),"\n",(0,a.jsx)(n.li,{children:"User authentication with JWT tokens"}),"\n",(0,a.jsx)(n.li,{children:"Comprehensive documentation with Swagger UI"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"tech-stack",children:"Tech Stack"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"FastAPI"}),": Modern, fast web framework for building APIs"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"SQLAlchemy"}),": SQL toolkit and ORM"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Alembic"}),": Database migration tool"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"PostgreSQL"}),": Relational database"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"JWT"}),": JSON Web Tokens for authentication"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Pydantic"}),": Data validation and settings management"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Pytest"}),": Testing framework"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Python 3.10+"}),"\n",(0,a.jsx)(n.li,{children:"PostgreSQL 15+"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"setup",children:"Setup"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Clone the repository:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/dbtiunov/perga-api.git\ncd perga-api\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Create a virtual environment and activate it:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"python -m venv .venv\nsource .venv/bin/activate  # On Windows: .venv\\Scripts\\activate\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Install dependencies:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pip install -r requirements.txt\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Create a ",(0,a.jsx)(n.code,{children:".env"})," file based on ",(0,a.jsx)(n.code,{children:".env.example"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cp .env.example .env\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Update the ",(0,a.jsx)(n.code,{children:".env"})," file with your specific configuration:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Set a secure ",(0,a.jsx)(n.code,{children:"SECRET_KEY"})]}),"\n",(0,a.jsx)(n.li,{children:"Configure PostgreSQL connection details"}),"\n",(0,a.jsxs)(n.li,{children:["Set ",(0,a.jsx)(n.code,{children:"CORS_ORIGINS"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Run database migrations:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"alembic upgrade head\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Start the application:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"uvicorn app.main:app --reload\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["The API will be available at ",(0,a.jsx)(n.a,{href:"http://localhost:8000",children:"http://localhost:8000"})," with the Swagger documentation at ",(0,a.jsx)(n.a,{href:"http://localhost:8000/docs",children:"http://localhost:8000/docs"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"docker-setup",children:"Docker Setup"}),"\n",(0,a.jsx)(n.p,{children:"You can also run the application using Docker:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Build and start the containers:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"docker-compose up -d\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["The API will be available at ",(0,a.jsx)(n.a,{href:"http://localhost:8080",children:"http://localhost:8080"})]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"api-documentation",children:"API Documentation"}),"\n",(0,a.jsx)(n.p,{children:"Once the application is running, you can access the interactive API documentation:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Swagger UI: ",(0,a.jsx)(n.a,{href:"http://localhost:8080/docs",children:"http://localhost:8080/docs"})]}),"\n",(0,a.jsxs)(n.li,{children:["ReDoc: ",(0,a.jsx)(n.a,{href:"http://localhost:8080/redoc",children:"http://localhost:8080/redoc"})]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"api-endpoints",children:"API Endpoints"}),"\n",(0,a.jsx)(n.h3,{id:"authentication",children:"Authentication"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /api/v1/auth/signup/"}),": Register a new user"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /api/v1/auth/access_token/"}),": Get access token (form data)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /api/v1/auth/access_token_json/"}),": Get access token (JSON)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /api/v1/auth/refresh_token/"}),": Refresh access token"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"GET /api/v1/auth/user/"}),": Get current user information"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"PUT /api/v1/auth/user/"}),": Update user information"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"planner-days",children:"Planner Days"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"GET /api/v1/planner/days/"}),": Get planner items for a specific day"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /api/v1/planner/days/"}),": Add a new item for a specific day"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"PUT /api/v1/planner/days/{item_id}"}),": Update a planner day item"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"DELETE /api/v1/planner/days/{item_id}"}),": Delete a planner day item"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"monthly-agenda-and-backlog",children:"Monthly Agenda and Backlog"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"GET /api/v1/planner/agendas/"}),": Get agendas by specific day"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"GET /api/v1/planner/agendas/{agenda_id}/items"}),": Get items for a specific agenda"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"POST /api/v1/planner/agendas/{agenda_id}/items"}),": Create a new agenda item"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"PUT /api/v1/planner/agendas/items/{item_id}"}),": Update an agenda item"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"DELETE /api/v1/planner/agendas/items/{item_id}"}),": Delete an agenda item"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,a.jsx)(n.h3,{id:"project-structure",children:"Project Structure"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"app/"}),": Main application package","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"api/"}),": API endpoints and routers"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"core/"}),": Core functionality (config, database)"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"models/"}),": SQLAlchemy models"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"schemas/"}),": Pydantic schemas for request/response validation"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"services/"}),": Business logic"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"tests/"}),": Test files"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,a.jsx)(n.p,{children:"Run tests with pytest:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"python -m pytest\n"})}),"\n",(0,a.jsx)(n.p,{children:"Run specific tests:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"python -m pytest app/tests/test_services/test_user_service.py\n"})}),"\n",(0,a.jsx)(n.h3,{id:"database-migrations",children:"Database Migrations"}),"\n",(0,a.jsx)(n.p,{children:"Create a new migration:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"./scripts/create_migration.sh <migration_name>\n"})}),"\n",(0,a.jsx)(n.p,{children:"Apply migrations:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"alembic upgrade head\n"})}),"\n",(0,a.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,a.jsxs)(n.p,{children:["This project is licensed under the MIT License - see the ",(0,a.jsx)(n.a,{href:"https://github.com/dbtiunov/perga-api/blob/main/LICENSE",children:"LICENSE"})," file for details."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var s=i(6540);const a={},l=s.createContext(a);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);